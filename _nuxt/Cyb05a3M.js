const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CVzztNyd.js","./5k4Fl3l9.js","./BqfMDtoE.js"])))=>i.map(i=>d[i]);
import{_ as B,r as I,i as b,o as P,a3 as A,w as F,a as L,d as z,e as S,f as C}from"./JACn959u.js";import{T as G}from"./5k4Fl3l9.js";function N({iterations:n=10,ms:r=250,threshold:c=.75,step:m=.1,factor:o=.5,flipflops:f=1/0,bounds:u=h=>h>100?[60,100]:[30,60],onIncline:d,onDecline:a,onChange:i,onFallback:s,three:y}){const h=Math.pow(10,0),e={fps:0,index:0,factor:o,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map};let v=0,g=1,_;const w=()=>{const{frames:p,averages:l}=e;if(!e.fallback){if(l.length<n){p.push(performance.now());const x=p[p.length-1]-p[0];if(x>=r){if(e.fps=Math.round(p.length/x*1e3*h)/h,e.refreshrate=Math.max(e.refreshrate,e.fps),l[e.index++%n]=e.fps,l.length===n){const[E,k]=u(e.refreshrate),M=l.filter(t=>t>=k),R=l.filter(t=>t<E);M.length>n*c&&(e.factor=Math.min(1,e.factor+m),e.flipped++,d&&d(e),e.subscriptions.forEach(t=>t.onIncline&&t.onIncline(e))),R.length>n*c&&(e.factor=Math.max(0,e.factor-m),e.flipped++,a&&a(e),e.subscriptions.forEach(t=>t.onDecline&&t.onDecline(e))),v!==e.factor&&(v=e.factor,i&&i(e),e.subscriptions.forEach(t=>t.onChange&&t.onChange(e))),e.flipped>f&&!e.fallback&&(e.fallback=!0,s&&s(e),e.subscriptions.forEach(t=>t.onFallback&&t.onFallback(e))),e.averages=[]}e.frames=[],e.factor!==1&&g>e.factor&&(y.proxy({type:"factor",factor:Math.round(e.factor*10)/10,fps:e.fps}),g=e.factor)}}_=requestAnimationFrame(w)}};return w(),{api:e,dispose:()=>{_&&cancelAnimationFrame(_)}}}const T={class:"container"},U={__name:"Globe",setup(n){const r=I(),c=b("zones"),m=b("currentIndex");return P(()=>{const o=G.createApp(r.value,{camera:{near:.1,far:10,fov:44,position:[0,0,3]}}),f=new Worker(new URL(""+new URL("GlobeScene.worker-CWcJAqwO.js",import.meta.url).href,import.meta.url),{type:"module"});o.render(f,A(()=>import("./CVzztNyd.js"),__vite__mapDeps([0,1,2]),import.meta.url)),F(m,(a,i)=>{o.proxy({type:"zone",countries:[...new Set(c[a].exchanges.map(s=>s.country))]})}),o.proxy({type:"zone",countries:[...new Set(c[0].exchanges.map(a=>a.country))]});const u=a=>{const{left:i,top:s}=r.value.parentElement.getBoundingClientRect();o.proxy({type:"mouse",clientX:(a.clientX-i)/r.value.parentElement.offsetWidth,clientY:(a.clientY-s)/r.value.parentElement.offsetHeight})};r.value.parentNode.addEventListener("pointermove",u);const d=N({iterations:1,ms:100,factor:1,flipped:2,three:o});L(()=>{r.value.parentNode.removeEventListener("pointermove",u),o.dispose(),f.terminate(),d.dispose()})}),(o,f)=>(z(),S("div",T,[C("canvas",{ref_key:"canvasRef",ref:r},null,512)]))}},q=B(U,[["__scopeId","data-v-32d27981"]]);export{q as default};
